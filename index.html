<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mata Uang & PDB Dunia Wijaya Interaktif</title>
<style>
  :root {
    --primary: #2c3e50;
    --secondary: #3498db;
    --accent: #e74c3c;
    --light: #ecf0f1;
    --dark: #2c3e50;
    --success: #2ecc71;
    --warning: #f39c12;
    --danger: #e74c3c;
    --shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  
  body { 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    background: linear-gradient(135deg, #f0f2f5 0%, #dfe6e9 100%);
    color: var(--dark); 
    margin: 0; 
    padding: 0; 
    line-height: 1.6;
  }
  
  header {
    background: linear-gradient(to right, var(--primary), var(--secondary));
    color: white;
    padding: 20px;
    text-align: center;
    box-shadow: var(--shadow);
    position: relative;
    overflow: hidden;
  }
  
  header::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><circle cx="50" cy="50" r="40" fill="white"/><text x="50" y="55" font-size="20" text-anchor="middle" fill="white">â‚¿</text></svg>');
    opacity: 0.1;
  }
  
  h1 { 
    margin: 0; 
    font-size: 2.2rem;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
  }
  
  .subtitle {
    font-style: italic;
    opacity: 0.9;
    margin-top: 5px;
  }
  
  .container { 
    max-width: 1400px; 
    margin: 20px auto; 
    padding: 20px;
  }
  
  .dashboard {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  @media (max-width: 1000px) {
    .dashboard {
      grid-template-columns: 1fr;
    }
  }
  
  .currency-grid { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
    gap: 20px; 
  }
  
  .gdp-panel {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: var(--shadow);
  }
  
  .gdp-panel h2 {
    margin-top: 0;
    color: var(--primary);
    border-bottom: 2px solid var(--secondary);
    padding-bottom: 10px;
  }
  
  .gdp-list {
    max-height: 400px;
    overflow-y: auto;
  }
  
  .gdp-item {
    display: flex;
    justify-content: space-between;
    padding: 10px 0;
    border-bottom: 1px solid #eee;
  }
  
  .gdp-item:last-child {
    border-bottom: none;
  }
  
  .gdp-name {
    font-weight: bold;
  }
  
  .gdp-value {
    color: var(--success);
    font-weight: bold;
  }
  
  .gdp-growth {
    font-size: 0.8rem;
    color: #7f8c8d;
    margin-top: 3px;
  }
  
  .currency-card { 
    background: white; 
    border-radius: 12px; 
    box-shadow: var(--shadow);
    padding: 20px; 
    position: relative;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border-left: 4px solid var(--secondary);
    overflow: hidden;
  }
  
  .currency-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
  }
  
  .currency-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
  }
  
  .currency-title {
    flex: 1;
  }
  
  .currency-card h2 { 
    margin: 0 0 5px 0; 
    font-size: 1.3rem; 
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .currency-icon {
    width: 30px;
    height: 30px;
    background: var(--secondary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 0.8rem;
  }
  
  .currency-change {
    font-weight: bold; 
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 0.85rem;
    background: #f8f9fa;
    white-space: nowrap;
    margin-left: 10px;
  }
  
  .up { 
    color: var(--success); 
  }
  
  .down { 
    color: var(--danger); 
  }
  
  .price { 
    font-size: 1.8rem; 
    font-weight: bold; 
    margin: 10px 0;
    color: var(--dark);
  }
  
  .usd-value { 
    color: #7f8c8d; 
    font-size: 0.9rem;
    margin-bottom: 15px;
  }
  
  .gdp-info {
    background: #f8f9fa;
    padding: 10px;
    border-radius: 8px;
    margin: 10px 0;
    font-size: 0.9rem;
  }
  
  .gdp-info strong {
    color: var(--primary);
  }
  
  .controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #eee;
  }
  
  .btn {
    background: var(--secondary);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s;
  }
  
  .btn:hover {
    background: #2980b9;
  }
  
  .btn-danger {
    background: var(--danger);
  }
  
  .btn-danger:hover {
    background: #c0392b;
  }
  
  .btn-small {
    padding: 5px 10px;
    font-size: 0.8rem;
  }
  
  .converter { 
    background: white; 
    padding: 25px; 
    border-radius: 12px; 
    box-shadow: var(--shadow);
    position: relative;
    overflow: hidden;
    margin-top: 30px;
  }
  
  .converter::before {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 100px;
    height: 100px;
    background: var(--secondary);
    opacity: 0.1;
    border-radius: 0 0 0 100px;
  }
  
  .converter h2 { 
    margin-top: 0; 
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .converter-content {
    display: grid;
    grid-template-columns: 1fr 40px 1fr;
    gap: 15px;
    align-items: center;
  }
  
  @media (max-width: 600px) {
    .converter-content {
      grid-template-columns: 1fr;
    }
    
    .converter-arrow {
      display: none;
    }
  }
  
  .input-group {
    margin-bottom: 15px;
  }
  
  .input-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: var(--dark);
  }
  
  .input-field {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 1rem;
    box-sizing: border-box;
  }
  
  .input-field:focus {
    outline: none;
    border-color: var(--secondary);
    box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
  }
  
  .result { 
    margin-top: 20px; 
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    font-size: 1.2rem; 
    font-weight: bold;
    text-align: center;
    border-left: 4px solid var(--success);
  }
  
  .converter-arrow {
    text-align: center;
    font-size: 2rem;
    color: var(--secondary);
  }
  
  .last-updated {
    text-align: center;
    margin-top: 20px;
    color: #7f8c8d;
    font-size: 0.9rem;
  }
  
  .rate-info {
    font-size: 0.9rem;
    color: #7f8c8d;
    margin-top: 5px;
  }
  
  .inflation-controls {
    background: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
    margin-top: 20px;
  }
  
  .inflation-controls h3 {
    margin-top: 0;
    color: var(--primary);
  }
  
  .inflation-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  
  footer {
    text-align: center;
    padding: 20px;
    margin-top: 40px;
    color: #7f8c8d;
    font-size: 0.9rem;
    border-top: 1px solid #ddd;
  }
</style>
</head>
<body>
<header>
  <h1>Mata Uang & PDB Dunia Wijaya Interaktif</h1>
  <div class="subtitle">Pantau mata uang dan PDB per kapita dari berbagai kerajaan</div>
</header>

<div class="container">
  <div class="dashboard">
    <div class="currency-grid" id="currencyContainer"></div>
    
    <div class="gdp-panel">
      <h2>ðŸ“Š PDB Per Kapita (USD)</h2>
      <div class="gdp-list" id="gdpList">
        <!-- GDP items will be generated here -->
      </div>
      <div style="margin-top: 15px;">
        <button class="btn btn-small" onclick="increaseAllGDP()" style="width: 100%">Tambah +100 semua PDB</button>
      </div>
    </div>
  </div>
  
  <div class="converter">
    <h2><span>ðŸ”„</span> Konverter Mata Uang</h2>
    
    <div class="converter-content">
      <div class="input-group">
        <label>Jumlah</label>
        <input type="number" id="convertAmount" class="input-field" value="1" min="0" step="0.01">
      </div>
      
      <div class="converter-arrow">â†’</div>
      
      <div class="input-group">
        <label>Dari</label>
        <select id="fromCurrency" class="input-field"></select>
        <div class="rate-info" id="fromRate">1 USD = ...</div>
      </div>
      
      <div class="converter-arrow">â†’</div>
      
      <div class="input-group">
        <label>Ke</label>
        <select id="toCurrency" class="input-field"></select>
        <div class="rate-info" id="toRate">1 USD = ...</div>
      </div>
    </div>
    
    <button onclick="updateConvert()" class="btn" style="width: 100%; margin-top: 10px;">Konversi Sekarang</button>
    
    <div class="result" id="convertResult">Hasil: -</div>
    
    <div class="inflation-controls">
      <h3>Kontrol Ekonomi Global</h3>
      <div class="inflation-buttons">
        <button class="btn btn-small" onclick="applyGlobalInflation(0.001)">+0.1% Semua</button>
        <button class="btn btn-small btn-danger" onclick="applyGlobalInflation(-0.001)">-0.1% Semua</button>
        <button class="btn btn-small" onclick="increaseAllGDP()">PDB +100 Semua</button>
        <button class="btn btn-small btn-danger" onclick="recessionAllGDP()">Resesi PDB -100</button>
        <button class="btn btn-small btn-danger" onclick="hyperinflation()">Hyperinflasi!</button>
      </div>
    </div>
    
    <div class="last-updated" id="lastUpdated">Terakhir diperbarui: -</div>
  </div>
</div>

<footer>
  Sistem Ekonomi Dunia Wijaya Â© 2023 - Semua nilai dapat berubah setiap 2 detik
</footer>

<script>
let usdToIDR = 16500; // 1 USD = 16.500 IDR
let countries = [
  { name: "Wijayanagara", code: "WJD", currency: "Dinar Wijayanagara", usd: 8.17, color: "#3498db", icon: "ðŸ‘‘", gdp: 256000, gdpGrowth: 0 },
  { name: "Safir", code: "SFD", currency: "Dinar Safir", usd: 6.15, color: "#2980b9", icon: "ðŸ”·", gdp: 104178, gdpGrowth: 0 },
  { name: "Amethyst", code: "AMD", currency: "Dinar Amethyst", usd: 4.10, color: "#9b59b6", icon: "ðŸ’Ž", gdp: 76109, gdpGrowth: 0 },
  { name: "Glaciora", code: "GLF", currency: "Dirham Glaciora", usd: 0.78, color: "#1abc9c", icon: "â„ï¸", gdp: 45109, gdpGrowth: 0 },
  { name: "Mahendraland", code: "MHD", currency: "Dirham Mahendraland", usd: 0.20, color: "#e67e22", icon: "ðŸ¦…", gdp: 21109, gdpGrowth: 0 },
  { name: "Agrawijaya", code: "AGB", currency: "Dinar Agrawijaya", usd: 0.12, color: "#f1c40f", icon: "ðŸŒ¾", gdp: 35109, gdpGrowth: 0 },
  { name: "Mahatlupina", code: "MHT", currency: "Birham Mahatlupina", usd: 0.05, color: "#e74c3c", icon: "ðŸ‰", gdp: 21109, gdpGrowth: 0 },
  { name: "Ekslandia Utara", code: "EXUK", currency: "Dirham Ekslandia Utara", usd: 0.01, color: "#2c3e50", icon: "ðŸ”º", gdp: 5068, gdpGrowth: 0 },
  { name: "Ekslandia Selatan", code: "EXSK", currency: "Dinar Ekslandia Selatan", usd: 0.05, color: "#2ecc71", icon: "ðŸ”»", gdp: 1566, gdpGrowth: 0 }
];

// Format rupiah
function formatRupiah(value){
  return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 2 }).format(value);
}

// Format USD
function formatUSD(value) {
  return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0 }).format(value);
}

// Format nilai sangat kecil
function formatVerySmall(value) {
  if (value >= 0.01) {
    return value.toFixed(4);
  } else if (value >= 0.0001) {
    return value.toFixed(6);
  } else if (value >= 0.000001) {
    return value.toFixed(8);
  } else if (value >= 0.00000001) {
    return value.toFixed(10);
  } else {
    return value.toExponential(4);
  }
}

// Random naik turun Â±0.1%
function randomChange(value){
  let changePercent = (Math.random() * 2 - 1) / 1000; // Â±0.1%
  return value * (1 + changePercent);
}

const container = document.getElementById("currencyContainer");
const gdpList = document.getElementById("gdpList");

// Render ulang kartu sesuai urutan
function renderCurrencies(){
  container.innerHTML = '';
  // Urut dari termahal ke termurah (USD)
  countries.sort((a,b) => b.usd - a.usd);
  countries.forEach(c => {
    const changeClass = c.changePercent >= 0 ? 'up' : 'down';
    const changeSymbol = c.changePercent >= 0 ? 'â†—' : 'â†˜';
    
    const card = document.createElement("div");
    card.className = "currency-card";
    card.style.borderLeftColor = c.color;
    card.innerHTML = `
      <div class="currency-header">
        <div class="currency-title">
          <h2><span class="currency-icon" style="background: ${c.color}">${c.icon}</span> ${c.currency} (${c.code})</h2>
          <div class="currency-change ${changeClass}">${changeSymbol} ${Math.abs(c.changePercent).toFixed(2)}%</div>
        </div>
      </div>
      <div class="price" id="price-${c.code}">${formatRupiah(c.displayPrice)}</div>
      <div class="usd-value">Nilai USD: $${formatVerySmall(c.usd)}</div>
      
      <div class="gdp-info">
        <div><strong>${c.name}</strong></div>
        <div>PDB per kapita: <strong>${formatUSD(c.gdp)}</strong></div>
        <div class="gdp-growth">Pertumbuhan: ${c.gdpGrowth >= 0 ? '+' : ''}${c.gdpGrowth.toFixed(0)} USD</div>
      </div>
      
      <div class="controls">
        <div>USD nyata: <strong id="realUSD-${c.code}">${formatVerySmall(c.usd)}</strong></div>
        <div>
          <button class="btn btn-small btn-danger" onclick="adjustUSD('${c.code}', -0.001)">-0.1%</button>
          <button class="btn btn-small" onclick="adjustUSD('${c.code}', 0.001)">+0.1%</button>
          <button class="btn btn-small" onclick="increaseGDP('${c.code}')">PDB +100</button>
        </div>
      </div>
    `;
    container.appendChild(card);
  });
}

// Render GDP list
function renderGDPList() {
  gdpList.innerHTML = '';
  // Urut dari PDB tertinggi ke terendah
  countries.sort((a, b) => b.gdp - a.gdp);
  countries.forEach(c => {
    const gdpItem = document.createElement("div");
    gdpItem.className = "gdp-item";
    gdpItem.innerHTML = `
      <div class="gdp-name">${c.name}</div>
      <div class="gdp-value">${formatUSD(c.gdp)}</div>
    `;
    gdpList.appendChild(gdpItem);
  });
}

// Inisialisasi displayPrice
countries.forEach(c => {
  c.displayPrice = c.usd * usdToIDR;
  c.changePercent = 0;
});

// Update harga tiap 2 detik
setInterval(() => {
  countries.forEach(c => {
    // Update nilai mata uang
    let old = c.displayPrice;
    c.displayPrice = randomChange(c.displayPrice);
    let changePercent = ((c.displayPrice - old)/old*100);
    c.changePercent = changePercent;
  });
  renderCurrencies();
  updateRateInfo();
  updateLastUpdated();
}, 2000);

// Fungsi adjust USD manual dengan perubahan kecil
function adjustUSD(code, deltaPercent){
  const c = countries.find(x => x.code === code);
  if(c){
    const newValue = c.usd * (1 + deltaPercent);
    // Batasi nilai minimum menjadi 0.000000000001 (1e-12)
    c.usd = Math.max(0.000000000001, newValue);
    c.displayPrice = c.usd * usdToIDR;
    renderCurrencies();
    updateRateInfo();
  }
}

// Meningkatkan PDB suatu negara
function increaseGDP(code) {
  const c = countries.find(x => x.code === code);
  if(c){
    const oldGDP = c.gdp;
    c.gdp += 100;
    c.gdpGrowth = c.gdp - oldGDP;
    renderCurrencies();
    renderGDPList();
  }
}

// Meningkatkan semua PDB
function increaseAllGDP() {
  countries.forEach(c => {
    const oldGDP = c.gdp;
    c.gdp += 100;
    c.gdpGrowth = c.gdp - oldGDP;
  });
  renderCurrencies();
  renderGDPList();
}

// Resesi semua PDB
function recessionAllGDP() {
  countries.forEach(c => {
    const oldGDP = c.gdp;
    c.gdp = Math.max(100, c.gdp - 100);
    c.gdpGrowth = c.gdp - oldGDP;
  });
  renderCurrencies();
  renderGDPList();
}

// Terapkan inflasi/deflasi global ke semua mata uang
function applyGlobalInflation(percent){
  countries.forEach(c => {
    const newValue = c.usd * (1 + percent);
    // Batasi nilai minimum menjadi 0.000000000001 (1e-12)
    c.usd = Math.max(0.000000000001, newValue);
    c.displayPrice = c.usd * usdToIDR;
  });
  renderCurrencies();
  updateRateInfo();
}

// Simulasi hyperinflasi - nilai mata uang turun drastis
function hyperinflation(){
  countries.forEach(c => {
    // Mata uang yang lebih murah mengalami inflasi lebih tinggi
    const inflationRate = c.usd < 1 ? 0.5 : 0.3; // 50% atau 30% penurunan
    const newValue = c.usd * (1 - inflationRate);
    // Batasi nilai minimum menjadi 0.000000000001 (1e-12)
    c.usd = Math.max(0.000000000001, newValue);
    c.displayPrice = c.usd * usdToIDR;
  });
  renderCurrencies();
  updateRateInfo();
}

// Populate dropdown converter
const fromSelect = document.getElementById("fromCurrency");
const toSelect = document.getElementById("toCurrency");
function populateConverter(){
  fromSelect.innerHTML='';
  toSelect.innerHTML='';
  countries.forEach(c => {
    let option1 = document.createElement("option");
    option1.value = c.code;
    option1.textContent = `${c.currency} (${c.code})`;
    fromSelect.appendChild(option1);

    let option2 = document.createElement("option");
    option2.value = c.code;
    option2.textContent = `${c.currency} (${c.code})`;
    toSelect.appendChild(option2);
  });
  
  // Default pilihan pertama adalah WJD
  fromSelect.value = "WJD";
}

// Update rate info
function updateRateInfo() {
  const fromCode = fromSelect.value;
  const toCode = toSelect.value;
  
  const fromCur = countries.find(c => c.code === fromCode);
  const toCur = countries.find(c => c.code === toCode);
  
  if (fromCur) {
    document.getElementById("fromRate").textContent = `1 ${fromCode} = $${formatVerySmall(fromCur.usd)} USD`;
  }
  
  if (toCur) {
    document.getElementById("toRate").textContent = `1 ${toCode} = $${formatVerySmall(toCur.usd)} USD`;
  }
}

// Update last updated time
function updateLastUpdated() {
  const now = new Date();
  const timeString = now.toLocaleTimeString('id-ID', { 
    hour: '2-digit', 
    minute: '2-digit', 
    second: '2-digit' 
  });
  document.getElementById("lastUpdated").textContent = `Terakhir diperbarui: ${timeString}`;
}

// Converter function
function updateConvert(){
  let amount = parseFloat(document.getElementById("convertAmount").value) || 0;
  let fromCode = fromSelect.value;
  let toCode = toSelect.value;
  let fromCur = countries.find(c => c.code === fromCode);
  let toCur = countries.find(c => c.code === toCode);

  if(fromCur && toCur){
    // Konversi melalui USD sebagai mata uang perantara
    let amountInUSD = amount * fromCur.usd;
    let converted = amountInUSD / toCur.usd;
    
    document.getElementById("convertResult").innerHTML = `
      <div>${amount.toFixed(2)} ${fromCode} = <span style="color: var(--success);">${formatVerySmall(converted)} ${toCode}</span></div>
      <div style="font-size: 0.9rem; margin-top: 5px; color: #7f8c8d;">
        Nilai USD: $${formatVerySmall(amountInUSD)}
      </div>
    `;
  }
}

// Event listener untuk converter
document.getElementById("convertAmount").addEventListener("input", updateConvert);
fromSelect.addEventListener("change", function() {
  updateConvert();
  updateRateInfo();
});
toSelect.addEventListener("change", function() {
  updateConvert();
  updateRateInfo();
});

// Inisialisasi
populateConverter();
renderCurrencies();
renderGDPList();
updateConvert();
updateRateInfo();
updateLastUpdated();
</script>
</body>
</html>
